function yomico(e){function t(e){let n=[];for(e=e.firstChild;e;e=e.nextSibling)e.tagName=="TEMPLATE"&&(e=e.content),e.nodeType==3?n.push(e):n=n.concat(t(e));return n}function n(e,n){let o=t(document);n&&(o=o.filter(e=>n(e))),o.forEach(t=>{e=s(t,e)})}function s(e,t){const i=document.createElement("span");let n=0,s=e.textContent;for(;!0;){if(n>=t.length)break;const[a,r]=t[n],e=s.indexOf(a);if(e==-1)break;if(n+=1,e!=0){const t=document.createElement("span");t.textContent=s.slice(0,e),i.appendChild(t)}const c=o(a,r);i.appendChild(c),s=s.slice(e+a.length)}if(n!=0){const t=document.createElement("span");t.textContent=s,i.appendChild(t),e.replaceWith(i)}return t.slice(n)}function o(e,t){const n=document.createElement("ruby");n.textContent=e;const s=document.createElement("rt");return s.textContent=t,n.appendChild(s),n}fetch(e).then(e=>e.text()).then(e=>{const t=[];e.trimEnd().split(`
`).forEach(e=>{const[n,s,o]=e.split(",");t.push([n,s])}),n(t)})}export{yomico}